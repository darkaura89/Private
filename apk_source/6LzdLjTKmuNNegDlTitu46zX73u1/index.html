<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jalwa — Dark Cyber Mod (Draggable Floating Panel)</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#000;
      --neon:#00ff66;
      --panel:#070707;
    }
    html,body{height:100%;margin:0;padding:0;background:var(--bg);color:var(--neon);font-family:'Share Tech Mono',monospace;overflow:hidden;}
    #app-container{width:100%;height:100%;display:grid;grid-template-rows:72px 1fr}
    .topbar{display:flex;align-items:center;justify-content:center;padding:12px;border-bottom:2px solid rgba(0,255,102,0.06);background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));z-index:10;}
    .play-btn{border:2px solid rgba(0,255,102,0.14);background:linear-gradient(90deg, rgba(0,255,102,0.03), rgba(0,209,255,0.02));color:#fff;padding:10px 20px;font-size:16px;border-radius:10px;cursor:pointer;font-weight:700;}
    .vertical-brand{position:absolute;left:12px;top:50%;transform:translateY(-50%);writing-mode:vertical-rl;font-size:28px;letter-spacing:5px;color:rgba(0,255,102,0.06);pointer-events:none;}
    #frame-wrap{position:relative;width:100%;height:calc(100vh - 72px);overflow:hidden;background:#000;}
    iframe{position:absolute;top:0;left:0;width:100%;height:100%;border:0;display:block;background:#000;}

    .floating-panel{position:fixed;left:50%; top:50%;width:280px; height:240px;transform:translate(-50%,-50%);background:var(--panel);border:3px solid rgba(255,0,150,0.18);border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,0.7),0 0 30px rgba(255,0,150,0.12),inset 0 0 16px rgba(0,255,102,0.03);z-index:9999;display:none;flex-direction:column;overflow:hidden;cursor:move;}
    .panel-header{padding:8px;text-align:center;font-weight:900;font-size:15px;color:#fff;background:rgba(255,0,150,0.02);}
    .panel-content{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;padding:10px;}
    .prediction{font-size:28px;font-weight:900;min-height:40px;text-align:center;}
    .prediction.loading{color:#00e5ff;animation: blink 1s infinite;}
    .prediction.bigg{color:#ff6b6b;text-shadow:0 0 12px rgba(255,107,107,0.7)}
    .prediction.small{color:#7aff8d;text-shadow:0 0 8px rgba(122,255,141,0.6)}
    @keyframes blink{50%{opacity:0.3;}}
    .server-status{padding:6px 8px;text-align:center;background:rgba(255,0,150,0.02);border-top:1px solid rgba(255,0,150,0.06);border-bottom:1px solid rgba(255,0,150,0.06);font-weight:800;color:#fff;font-size:12px;}
    .server-status .online{color:#bfff00;text-shadow:0 0 4px #bfff00}
    .game-period-line{padding:6px 8px;text-align:center;font-size:14px;font-weight:800;color:#00ffcc;}
    .buttons-row{display:flex;justify-content:space-between;padding:8px;gap:8px}
    .buttons-row button{flex:1;padding:6px 8px;border-radius:6px;border:2px solid rgba(255,0,150,0.12);background:transparent;color:#fff;font-weight:800;cursor:pointer;font-size:12px;text-transform:uppercase;}
    .btn-exit{color:#ff7a9b}.btn-hide{color:#caa3ff}
  </style>
</head>
<body>
  <div id="app-container">
    <div class="topbar">
      <button id="playBtn" class="play-btn">☠️ OPEN HACK ☠️</button>
      <div class="vertical-brand">D A R K  &nbsp; C Y B E R</div>
    </div>

    <div id="frame-wrap">
      <iframe id="gameFrame" src="https://www.jalwagameapp5.com/#/register?invitationCode=416174049222" allowfullscreen></iframe>
    </div>
  </div>

  <!-- Floating panel -->
  <div id="floating-panel" class="floating-panel" role="dialog" aria-hidden="true">
    <div class="panel-header">DARK CYBER VIP MODE</div>

    <div class="panel-content">
      <div id="prediction" class="prediction">--</div>
    </div>

    <div id="serverStatus" class="server-status">SERVER STATUS : <span class="status-text">OFFLINE</span></div>
    <div id="gamePeriodLine" class="game-period-line">Game Period :- --</div>

    <div class="buttons-row">
      <button class="btn-exit" id="btnExit">EXIT</button>
      <button class="btn-hide" id="btnHide">HIDE</button>
    </div>
  </div>

  <script>
  (function(){
    const playBtn=document.getElementById('playBtn');
    const panel=document.getElementById('floating-panel');
    const btnExit=document.getElementById('btnExit');
    const btnHide=document.getElementById('btnHide');
    const gamePeriodLine=document.getElementById('gamePeriodLine');
    const prediction=document.getElementById('prediction');
    const statusText=document.querySelector('.status-text');

    playBtn.onclick=()=>{ panel.style.display='flex'; };
    btnExit.onclick=()=>{ panel.style.display='none'; };
    btnHide.onclick=()=>{ panel.style.display='none'; };

    const API_URL='https://api.bdg88zf.com/api/webapi/GetGameIssue';
    const API_PAYLOAD={
      typeId:1,
      language:0,
      random:"40079dcba93a48769c6ee9d4d4fae23f",
      signature:"D12108C4F57C549D82B23A91E0FA20AE",
      timestamp:1727792520
    };

    let lastPeriod=null;

    async function fetchPeriod(){
      try{
        const r=await fetch(API_URL,{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify(API_PAYLOAD)
        });
        const j=await r.json();
        if(j && j.code===0 && j.data && j.data.issueNumber){
          statusText.textContent='ONLINE ✅';
          statusText.classList.add('online');
          const per=j.data.issueNumber.toString();

          if(per !== lastPeriod){
            lastPeriod=per;
            gamePeriodLine.textContent="Game Period :- "+per;

            prediction.textContent="ANALYCS...";
            prediction.className="prediction loading";

            setTimeout(()=>{
              const d=parseInt(per.slice(-1));
              if(!isNaN(d)){
                if(d>=5){
                  prediction.textContent="BIGG";
                  prediction.className="prediction bigg";
                }else{
                  prediction.textContent="SMALL";
                  prediction.className="prediction small";
                }
              }else{
                prediction.textContent="--";
              }
            },2000);
          }
        }else{
          statusText.textContent='OFFLINE';
        }
      }catch(e){
        statusText.textContent='OFFLINE';
      }
    }

    setInterval(fetchPeriod,5000);
    fetchPeriod();

    // === Dragging Logic ===
    let isDragging=false, offsetX=0, offsetY=0;
    panel.addEventListener('mousedown',startDrag);
    panel.addEventListener('touchstart',startDrag);

    function startDrag(e){
      isDragging=true;
      const rect=panel.getBoundingClientRect();
      offsetX=(e.touches?e.touches[0].clientX:e.clientX)-rect.left;
      offsetY=(e.touches?e.touches[0].clientY:e.clientY)-rect.top;
      document.addEventListener('mousemove',onDrag);
      document.addEventListener('mouseup',stopDrag);
      document.addEventListener('touchmove',onDrag);
      document.addEventListener('touchend',stopDrag);
    }
    function onDrag(e){
      if(!isDragging) return;
      const x=(e.touches?e.touches[0].clientX:e.clientX)-offsetX;
      const y=(e.touches?e.touches[0].clientY:e.clientY)-offsetY;
      panel.style.left=x+'px';
      panel.style.top=y+'px';
      panel.style.transform='translate(0,0)';
    }
    function stopDrag(){
      isDragging=false;
      document.removeEventListener('mousemove',onDrag);
      document.removeEventListener('mouseup',stopDrag);
      document.removeEventListener('touchmove',onDrag);
      document.removeEventListener('touchend',stopDrag);
    }
  })();
  </script>
</body>
</html>